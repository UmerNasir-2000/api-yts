// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Cinematic {
  id                 String        @id @default(uuid())
  referenceId        Int           @unique @map("reference_id")
  title              String
  imdb               String
  youtubeTrailerCode String        @map("yt_trailer_code")
  slug               String        @unique
  releasedYear       Int           @map("released_year")
  runtime            Int
  description        String        @db.Text
  poster             String        @db.Text
  posterHash         String        @map("poster_hash") @db.Text
  language           String
  pictures           Json          @db.Json
  covers             Json          @db.Json
  genres             Json          @db.Json
  type               CinematicType @default(MOVIE)
  createdAt          DateTime      @default(now()) @map("created_at")
  updatedAt          DateTime      @updatedAt @map("updated_at")
  torrents           Torrent[]

  @@map("cinematics")
}

model Torrent {
  id               String   @id @default(uuid())
  url              String
  hash             String
  quality          String
  type             String
  isRepack         Boolean  @map("is_repack")
  videoCodec       String   @map("video_codec")
  bitDepth         Int      @map("bit_depth")
  audioChannels    String   @map("audio_channels")
  seeds            Int
  peers            Int
  size             String
  sizeBytes        Int      @map("size_bytes")
  dateUploaded     DateTime @map("date_uploaded")
  dateUploadedUnix Int      @map("date_uploaded_unix")

  movieId String    @map("movie_id")
  movie   Cinematic @relation(fields: [movieId], references: [id])

  @@map("torrents")
}

enum CinematicType {
  MOVIE
  TV_SHOW
}
